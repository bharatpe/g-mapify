import e,{useState as n,useEffect as r,forwardRef as t,useRef as a,useImperativeHandle as o,useCallback as c}from"react";import l from"react-dom";function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var u={mapContainer:"_THUc8",map:"_1sPx9","address-card":"_1XKj7","map-container":"_2_kUN","geo-address":"_16-L6",markerIcon:"_13l5f",defaultSearchPosition:"_1e2LW",searchLoading:"_36eVq",mapItemUL:"_1Iwzh",mapItem:"_2XwNY",searchH1:"_2z0jc",searchH2:"_2GzpA"};function m(e,n){return e(n={exports:{}},n.exports),n.exports}var p=m(function(e){
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */
!function(){var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var c=r.apply(null,a);c&&e.push(c)}else if("object"===o)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r}()}),f="function"==typeof Symbol&&Symbol.for,d=f?Symbol.for("react.element"):60103,g=f?Symbol.for("react.portal"):60106,h=f?Symbol.for("react.fragment"):60107,y=f?Symbol.for("react.strict_mode"):60108,v=f?Symbol.for("react.profiler"):60114,b=f?Symbol.for("react.provider"):60109,w=f?Symbol.for("react.context"):60110,S=f?Symbol.for("react.async_mode"):60111,C=f?Symbol.for("react.concurrent_mode"):60111,N=f?Symbol.for("react.forward_ref"):60112,_=f?Symbol.for("react.suspense"):60113,E=f?Symbol.for("react.suspense_list"):60120,P=f?Symbol.for("react.memo"):60115,k=f?Symbol.for("react.lazy"):60116,M=f?Symbol.for("react.block"):60121,L=f?Symbol.for("react.fundamental"):60117,I=f?Symbol.for("react.responder"):60118,T=f?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function A(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case d:switch(e=e.type){case S:case C:case h:case v:case y:case _:return e;default:switch(e=e&&e.$$typeof){case w:case N:case k:case P:case b:return e;default:return n}}case g:return n}}}function O(e){return A(e)===C}var $={AsyncMode:S,ConcurrentMode:C,ContextConsumer:w,ContextProvider:b,Element:d,ForwardRef:N,Fragment:h,Lazy:k,Memo:P,Portal:g,Profiler:v,StrictMode:y,Suspense:_,isAsyncMode:function(e){return O(e)||A(e)===S},isConcurrentMode:O,isContextConsumer:function(e){return A(e)===w},isContextProvider:function(e){return A(e)===b},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===d},isForwardRef:function(e){return A(e)===N},isFragment:function(e){return A(e)===h},isLazy:function(e){return A(e)===k},isMemo:function(e){return A(e)===P},isPortal:function(e){return A(e)===g},isProfiler:function(e){return A(e)===v},isStrictMode:function(e){return A(e)===y},isSuspense:function(e){return A(e)===_},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===h||e===C||e===v||e===y||e===_||e===E||"object"==typeof e&&null!==e&&(e.$$typeof===k||e.$$typeof===P||e.$$typeof===b||e.$$typeof===w||e.$$typeof===N||e.$$typeof===L||e.$$typeof===I||e.$$typeof===T||e.$$typeof===M)},typeOf:A};function x(){}function H(){}m(function(e,n){}),m(function(e){e.exports=$}),H.resetWarningCache=x;var j=m(function(e){e.exports=function(){function e(e,n,r,t,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function n(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:H,resetWarningCache:x};return r.PropTypes=r,r}()}),z=require("./left-arrow~EgzQkufV.svg"),q=function(t){var a=t.placeholder,o=t.className,c=n(!0),l=c[0],i=c[1],s=e.createRef();return r(function(){s.current.focus()},[s]),e.createElement("div",{className:p("_14K7s",o,l?"_17s3a":"_23bw5"),onTransitionEnd:function(e){t.onClose()}},e.createElement("div",{className:"_3n9r_"},e.createElement("div",{className:"img-sec",onClick:function(){return i(!1)}},e.createElement("img",{src:z})),e.createElement("input",{type:"text",className:"_1DPib",onChange:function(e){var n;t.onChange(null==e||null===(n=e.target)||void 0===n?void 0:n.value)},ref:s,placeholder:a})),t.children)};function R(e,n){var r=null;return function(){for(var t=this,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];clearTimeout(r),r=setTimeout(function(){e.apply(t,o)},n)}}q.propTypes={placeHolder:j.string,onChange:j.func,onClose:j.func},q.defaultProps={placeHolder:"Search here",onChange:function(){},onClose:function(){}};var F=require("./marker~fVJYJDHQ.svg"),K={zoom:15,zoomControl:!1,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,mapTypeId:"roadmap"},U=!1,J=!1,X=null,D=[],V=[],W=function(e){if(e)for(var n=0;n<D.length;n++)D[n]();else for(var r=0;r<V.length;r++)V[r](new Error("map script not loaded"));D.length=0,V.length=0},Q=require("./search-icon~gbikSNDM.png"),B=function(n){return e.createElement("div",i({},n,{className:p("_1tqcp",n.className)}),e.createElement("div",{className:"_14pA0"}),e.createElement("div",{className:"_4A79G"},e.createElement("span",{className:"_1X7J4"}," Location "),e.createElement("span",{className:"_BXP-z"},n.value)),e.createElement("img",{src:Q,className:"_lEzl3"}))},Y=t(function(t,c){var s=t.appKey,m=t.mapOptions,f=t.mapClassName,d=t.hasMarker,g=t.hasSearch,h=t.mapSearchPlace,y=t.debounceTime,v=t.inputClassName,b=t.markerIcon,w=t.searchPlaceHolder,S=t.searchClassName,C=t.libraries,N=t.children,_=t.onSelect,E=t.customMarkers,P=t.autoCenter,k=t.allowSinglePopup,M=t.lat,L=t.lng,I=n([]),T=I[0],A=I[1],O=n(!1),$=O[0],x=O[1],H=n(1),j=H[0],z=H[1],F=n(!1),Q=F[0],Y=F[1],G=n({}),Z=G[0],ee=G[1],ne=n(""),re=ne[0],te=ne[1],ae=n(null),oe=ae[0],ce=ae[1];E&&E.length>0&&(M=E[0][0],L=E[0][1]);var le=a(null),ie=a(null),se=function(){g&&(ie.current?l.render(e.createElement(B,{value:re,onClick:function(){return x(!0)},className:v}),ie.current):console.error("mapSearchPlace element not found!","Selector = ",h))},ue=function(e,n){var r={lat:e,lng:n};oe.setCenter(r),oe.panTo(r),Z.lat!==r.lat&&Z.lng!==r.lng&&(te("Searching..."),fe(!0,{geometry:{location:{lat:e,lng:n}}},!0)),ee(r)},me=function(e){return new Promise(function(n,r){var t={query:e,fields:["name","formatted_address","geometry"]};new window.google.maps.places.PlacesService(oe).textSearch(t,function(e,t){t===window.google.maps.places.PlacesServiceStatus.OK?n(e,t):r(t)})})},pe=R(function(e){e&&e.length<3||(z(0),A([]),me(e).then(function(e){A(e),z(1)},function(){z(-1)}))},y),fe=function(e,n,r){if(_&&"function"==typeof _){var t=JSON.parse(JSON.stringify(n));_(e,t,r)}};return r(function(){s?(window.gm_authFailure=function(){Y(!0),fe(!1,{message:"Map load failed!"},-1)},function(e,n){return U?Promise.resolve():new Promise(function(r,t){function a(){U=!0,J=!1,X.setAttribute("loaded","true"),X.removeEventListener("load",a),X.removeEventListener("error",o)}function o(){U=!1,J=!1,X.setAttribute("loaded","false"),X.removeEventListener("error",o),X.removeEventListener("load",a),document.head.removeChild(X),W(!1)}window.initMapScript||(window.initMapScript=function(){console.log("Map script successfull"),W(!0)}),D.push(r),V.push(t),J||((X=document.createElement("script")).addEventListener("load",a),X.addEventListener("error",o),X.src=function(e,n){return"https://maps.googleapis.com/maps/api/js?key="+e+"&callback=initMapScript&libraries="+n}(e,n),X.setAttribute("id","google-map"),document.querySelector("head").appendChild(X),J=!0)})}(s,C).then(function(){h&&(ie={current:document.querySelector(h)}),function(e,n){if(window.google){var r={center:new window.google.maps.LatLng(e,n)};le.current&&ce(new window.google.maps.Map(le.current,i({},r,K,m)))}else console.error("google map library not found!")}(M,L),Y(!1)}).catch(function(){console.error("google map library loading error!")})):console.error("google map appKey not found!!!")},[s]),r(function(){oe&&(ue(M,L),se(),function(){if(E){var e=null;E.forEach(function(n){var r=new window.google.maps.Marker({position:new window.google.maps.LatLng(n[0],n[1]),map:oe,title:"Hello World!",visible:!0,icon:b});n[2]&&r.addListener("click",function(){k&&e&&e.close(),(e=new window.google.maps.InfoWindow({content:n[2]})).open(oe,r)}),r.setMap(oe)})}}())},[oe]),r(function(){re&&se()},[re]),r(function(){return oe&&d&&P&&(oe.addListener("dragend",function(){ue(oe.center.lat(),oe.center.lng())}),oe.addListener("zoom_changed",function(){ue(Z.lat,Z.lng)})),function(){window.google&&oe&&(window.google.maps.event.clearListeners(oe,"dragend"),window.google.maps.event.clearListeners(oe,"zoom_changed"))}},[Z]),o(c,function(){return{latLongFromQuery:function(e){try{return Promise.resolve(me(e))}catch(e){return Promise.reject(e)}}}}),e.createElement("div",{className:p(u.mapContainer,f)},e.createElement("div",{ref:le,className:u.map}),d&&P&&!Q&&e.createElement("div",{className:u.markerIcon,style:{backgroundImage:"url("+b+")"}}," "),g&&!Q&&!h&&e.createElement("div",{ref:ie,className:u.defaultSearchPosition}),N,$&&!Q&&e.createElement(q,{onClose:function(){return x(!1)},onChange:function(e){pe(e)},placeholder:w,className:S},e.createElement("div",{className:u.searchResultContainer},e.createElement("div",{className:u.searchLoading},0===j&&"Loading...",-1===j&&"No Results Found"),e.createElement("ul",{onClick:function(e){var n=e.target&&e.target.closest(".mapItem");if(n.hasAttribute("index")){var r=T[Number(n.getAttribute("index"))];x(!1),ue(r.geometry.location.lat(),r.geometry.location.lng())}},className:p(u.mapItemUL,"mapItem")},T.map(function(n,r){return e.createElement("li",{key:r,className:p(u.mapItem,"mapItem")},e.createElement("div",{className:u.searchH1},n.name),e.createElement("div",{className:u.searchH2},n.formatted_address))})))))});Y.propTypes={appKey:j.string,lat:j.number,lng:j.number,mapOptions:j.object,mapClassName:j.string,hasMarker:j.bool,hasSearch:j.bool,autoCenter:j.bool,mapSearchPlace:j.string,debounceTime:j.number,inputClassName:j.string,markerIcon:j.string,searchPlaceHolder:j.string,searchClassName:j.string,libraries:j.string,onSelect:j.func,children:j.element,customMarkers:j.array,allowSinglePopup:j.bool},Y.defaultProps={appKey:"",lat:28.7041,lng:77.1025,mapOptions:{},mapClassName:"",hasMarker:!0,hasSearch:!1,autoCenter:!0,mapSearchPlace:"",debounceTime:1e3,inputClassName:"",markerIcon:F,searchPlaceHolder:"Search here",searchClassName:"",libraries:"places",onSelect:function(){},children:null,customMarkers:[],allowSinglePopup:!0};var G={mapContainer:"_TclCI",map:"_1UtFE","address-card":"__uP8X","map-container":"_2U-w9","geo-address":"_2Pq0y",markerIcon:"_3XKLH",defaultSearchPosition:"_ecTr9",searchLoading:"_2DroX",mapItemUL:"_3cMLM",mapItem:"_3ACN6",searchH1:"_10BqR",searchH2:"_2AmkJ"},Z=t(function(t,s){var u=t.appKey,m=t.mapOptions,f=t.mapClassName,d=t.hasMarker,g=t.hasSearch,h=t.mapSearchPlace,y=t.debounceTime,v=t.inputClassName,b=t.markerIcon,w=t.searchPlaceHolder,S=t.searchClassName,C=t.children,N=t.onSelect,_=t.customMarkers,E=t.autoCenter,P=t.allowSinglePopup,k=t.lat,M=t.lng,L=n([]),I=L[0],T=L[1],A=n(!1),O=A[0],$=A[1],x=n(1),H=x[0],j=x[1],z=n(!1),F=z[0],K=z[1],Q=n({}),Y=Q[0],Z=Q[1],ee=n(""),ne=ee[0],re=ee[1],te=n(null),ae=te[0],oe=te[1],ce=n(null),le=ce[0],ie=ce[1];_&&_.length>0&&(k=_[0][0],M=_[0][1]);var se=a(null),ue=a(null),me=function(){g&&(ue.current?l.render(e.createElement(B,{value:ne,onClick:function(){return $(!0)},className:v}),ue.current):console.error("mapSearchPlace element not found!","Selector = ",h))},pe=c(function(){var e=ae.getCenter();de(e.lat,e.lng),le.setPosition(e)}),fe=c(function(){var e=ae.getCenter();le.setPosition(e)}),de=function(e,n){var r=new window.mappls.LatLng(e,n);console.log("MMI"),ae.panTo(r),Y.lat!==r.lat&&Y.lng!==r.lng&&(re("Searching..."),ye(!0,{geometry:{location:{lat:e,lng:n}}},!0)),Z(r)},ge=function(e){return new Promise(function(n,r){window.mappls.search({query:e},function(e){n(e)},function(e){r(e)})})},he=R(function(e){e&&e.length<3||(j(0),T([]),ge(e).then(function(e){T(e),j(1)},function(){j(-1)}))},y),ye=function(e,n,r){if(N&&"function"==typeof N){var t=JSON.parse(JSON.stringify(n));N(e,t,r)}};return r(function(){u?function(e,n){return U?Promise.resolve():new Promise(function(n,r){function t(){U=!0,J=!1,X.setAttribute("loaded","true"),X.removeEventListener("load",t),X.removeEventListener("error",a)}function a(){U=!1,J=!1,X.setAttribute("loaded","false"),X.removeEventListener("error",a),X.removeEventListener("load",t),document.head.removeChild(X),W(!1)}window.initMapScript||(window.initMapScript=function(){console.log("Map script successfull"),W(!0)}),D.push(n),V.push(r),J||((X=document.createElement("script")).addEventListener("load",t),X.addEventListener("error",a),X.src=function(e,n){return"https://apis.mapmyindia.com/advancedmaps/v1/"+e+"/map_sdk?layer=vector&v=3.0&callback=initMapScript"}(e),X.setAttribute("id","google-map"),document.querySelector("head").appendChild(X),J=!0)})}(u).then(function(){h&&(ue={current:document.querySelector(h)}),function(e,n){if(window.mappls){var r=new window.mappls.Map("map",i({center:[e,n],zoom:15,zoomControl:!0,location:!0,fullscreenControl:!1},m));se.current&&(oe(r),ie(new window.mappls.Marker({map:r,position:{lat:e,lng:n},icon_url:"https://apis.mapmyindia.com/map_v3/1.png"})))}else console.error("MapmyIndia map library not found!")}(k,M),K(!1)}).catch(function(){console.error("mmi library loading error!")}):console.error("MapmyIndia map apiKey not found!!!")},[u]),r(function(){ae&&(de(k,M),me(),function(){if(_){var e=null;_.forEach(function(n){var r=new window.mappls.Map.Marker([n[0],n[1]],{icon:window.mappls.Map.marker({iconUrl:b,iconSize:[32,32]})}).addTo(ae);n[2]&&r.on("click",function(){P&&e&&e.remove(),e=window.L.popup().setContent(n[2]),r.bindPopup(e).openPopup()})})}}())},[ae]),r(function(){ne&&me()},[ne]),r(function(){return ae&&d&&E&&(ae.on("dragend",pe),ae.on("drag",fe)),function(){ae&&(console.log("remove"),ae.off("dragend",pe),ae.off("drag",fe))}},[Y]),o(s,function(){return{latLongFromQuery:function(e){try{return Promise.resolve(ge(e))}catch(e){return Promise.reject(e)}}}}),e.createElement("div",{className:p(G.mapContainer,f),id:"map"},e.createElement("div",{ref:se,className:G.map}),d&&E&&!F&&e.createElement("div",{className:G.markerIcon,style:{backgroundImage:"url("+b+")"}}," "),g&&!F&&!h&&e.createElement("div",{ref:ue,className:G.defaultSearchPosition}),C,O&&!F&&e.createElement(q,{onClose:function(){return $(!1)},onChange:function(e){he(e)},placeholder:w,className:S},e.createElement("div",{className:G.searchResultContainer},e.createElement("div",{className:G.searchLoading},0===H&&"Loading...",-1===H&&"No Results Found"),e.createElement("ul",{onClick:function(e){var n=e.target.closest(".mapItem");if(n&&n.hasAttribute("index")){var r=I[Number(n.getAttribute("index"))];$(!1),de(r.latitude,r.longitude)}},className:p(G.mapItemUL,"mapItem")},I.map(function(n,r){return e.createElement("li",{key:r,className:p(G.mapItem,"mapItem")},e.createElement("div",{className:G.searchH1},n.placeName),e.createElement("div",{className:G.searchH2},n.displayPlace))})))))});Z.propTypes={apiKey:j.string,lat:j.number,lng:j.number,mapOptions:j.object,mapClassName:j.string,hasMarker:j.bool,hasSearch:j.bool,autoCenter:j.bool,mapSearchPlace:j.string,debounceTime:j.number,inputClassName:j.string,markerIcon:j.string,searchPlaceHolder:j.string,searchClassName:j.string,libraries:j.string,onSelect:j.func,children:j.element,customMarkers:j.array,allowSinglePopup:j.bool},Z.defaultProps={appKey:"",useMapMyIndia:!1,lat:28.7041,lng:77.1025,mapOptions:{},mapClassName:"",hasMarker:!0,hasSearch:!1,autoCenter:!0,mapSearchPlace:"",debounceTime:1e3,inputClassName:"",markerIcon:F,searchPlaceHolder:"Search here",searchClassName:"",libraries:"places",onSelect:function(){},children:null,customMarkers:[],allowSinglePopup:!0};var ee=function(e){return void 0===e&&(e=[]),function e(n,r,t){if(void 0===n&&(n=[]),void 0===r&&(r=0),void 0===t&&(t={}),n.length<1)return t;var a=n[r];if(!a)return t;var o=a.long_name;if(n.length>r){for(var c,l=function(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return s(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,void 0):void 0}}(e))){r&&(e=r);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}(a.types);!(c=l()).done;)switch(c.value){case"street_number":case"premise":t.streetNumber=o;break;case"route":t.route=o;break;case"postal_code":t.pin=o;break;case"country":t.country=o;break;case"administrative_area_level_1":t.state=o;break;case"locality":t.locality=o;break;case"sublocality":t.sublocality=t.sublocality?t.sublocality+", "+o:o}return e(n,++r,t)}return t}(e)};export{ee as AddressFormatter,Y as GMapify,Z as MapMyIndia};
