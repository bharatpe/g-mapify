import e,{useState as r,useEffect as n,forwardRef as t,useRef as o,useCallback as a,useImperativeHandle as c}from"react";import i from"react-dom";function l(){return(l=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var u={mapContainer:"_THUc8",map:"_1sPx9","address-card":"_1XKj7","map-container":"_2_kUN","geo-address":"_16-L6",markerIcon:"_13l5f",defaultSearchPosition:"_1e2LW",searchLoading:"_36eVq",mapItemUL:"_1Iwzh",mapItem:"_2XwNY",searchH1:"_2z0jc",searchH2:"_2GzpA"};function m(e,r){return e(r={exports:{}},r.exports),r.exports}var f=m(function(e){
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */
!function(){var r={}.hasOwnProperty;function n(){for(var e="",r=0;r<arguments.length;r++){var n=arguments[r];n&&(e=o(e,t(n)))}return e}function t(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)r.call(e,a)&&e[a]&&(t=o(t,a));return t}function o(e,r){return r?e?e+" "+r:e+r:e}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}),p="function"==typeof Symbol&&Symbol.for,d=p?Symbol.for("react.element"):60103,y=p?Symbol.for("react.portal"):60106,g=p?Symbol.for("react.fragment"):60107,v=p?Symbol.for("react.strict_mode"):60108,h=p?Symbol.for("react.profiler"):60114,b=p?Symbol.for("react.provider"):60109,S=p?Symbol.for("react.context"):60110,w=p?Symbol.for("react.async_mode"):60111,_=p?Symbol.for("react.concurrent_mode"):60111,C=p?Symbol.for("react.forward_ref"):60112,E=p?Symbol.for("react.suspense"):60113,N=p?Symbol.for("react.suspense_list"):60120,P=p?Symbol.for("react.memo"):60115,k=p?Symbol.for("react.lazy"):60116,O=p?Symbol.for("react.block"):60121,M=p?Symbol.for("react.fundamental"):60117,j=p?Symbol.for("react.responder"):60118,$=p?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function L(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case d:switch(e=e.type){case w:case _:case g:case h:case v:case E:return e;default:switch(e=e&&e.$$typeof){case S:case C:case k:case P:case b:return e;default:return r}}case y:return r}}}function I(e){return L(e)===_}var T={AsyncMode:w,ConcurrentMode:_,ContextConsumer:S,ContextProvider:b,Element:d,ForwardRef:C,Fragment:g,Lazy:k,Memo:P,Portal:y,Profiler:h,StrictMode:v,Suspense:E,isAsyncMode:function(e){return I(e)||L(e)===w},isConcurrentMode:I,isContextConsumer:function(e){return L(e)===S},isContextProvider:function(e){return L(e)===b},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===d},isForwardRef:function(e){return L(e)===C},isFragment:function(e){return L(e)===g},isLazy:function(e){return L(e)===k},isMemo:function(e){return L(e)===P},isPortal:function(e){return L(e)===y},isProfiler:function(e){return L(e)===h},isStrictMode:function(e){return L(e)===v},isSuspense:function(e){return L(e)===E},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===g||e===_||e===h||e===v||e===E||e===N||"object"==typeof e&&null!==e&&(e.$$typeof===k||e.$$typeof===P||e.$$typeof===b||e.$$typeof===S||e.$$typeof===C||e.$$typeof===M||e.$$typeof===j||e.$$typeof===$||e.$$typeof===O)},typeOf:L};function A(){}function x(){}m(function(e,r){}),m(function(e){e.exports=T}),function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var t={};"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),Object.keys(Object.assign({},t)).join("")}catch(e){return!1}}(),Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=A;var H=m(function(e){e.exports=function(){function e(e,r,n,t,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function r(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:x,resetWarningCache:A};return n.PropTypes=n,n}()}),z=require("./left-arrow~EgzQkufV.svg"),q=function(t){var o=t.placeholder,a=t.className,c=r(!0),i=c[0],l=c[1],s=e.createRef();return n(function(){s.current.focus()},[s]),e.createElement("div",{className:f("_14K7s",a,i?"_17s3a":"_23bw5"),onTransitionEnd:function(e){t.onClose()}},e.createElement("div",{className:"_3n9r_"},e.createElement("div",{className:"img-sec",onClick:function(){return l(!1)}},e.createElement("img",{src:z})),e.createElement("input",{type:"text",className:"_1DPib",onChange:function(e){var r;t.onChange(null==e||null===(r=e.target)||void 0===r?void 0:r.value)},ref:s,placeholder:o})),t.children)};q.propTypes={placeHolder:H.string,onChange:H.func,onClose:H.func},q.defaultProps={placeHolder:"Search here",onChange:function(){},onClose:function(){}};var R=require("./marker~fVJYJDHQ.svg"),F=!1,U=!1,K=null,D=[],J=[],V=function(e){if(e)for(var r=0;r<D.length;r++)D[r]();else for(var n=0;n<J.length;n++)J[n](new Error("map script not loaded"));D.length=0,J.length=0},W=require("./search-icon~gbikSNDM.png"),X=function(r){return e.createElement("div",l({},r,{className:f("_1tqcp",r.className)}),e.createElement("div",{className:"_14pA0"}),e.createElement("div",{className:"_4A79G"},e.createElement("span",{className:"_1X7J4"}," Location "),e.createElement("span",{className:"_BXP-z"},r.value)),e.createElement("img",{src:W,className:"_lEzl3"}))},Q=t(function(t,s){var m=t.apiKey,p=t.mapOptions,d=t.hasMarker,y=t.hasSearch,g=t.mapSearchPlace,v=t.debounceTime,h=t.inputClassName,b=t.markerIcon,S=t.searchPlaceHolder,w=t.searchClassName,_=t.children,C=t.onSelect,E=t.customMarkers,N=t.autoCenter,P=t.allowSinglePopup,k=t.lat,O=t.lng,M=r([]),j=M[0],$=M[1],L=r(!1),I=L[0],T=L[1],A=r(1),x=A[0],H=A[1],z=r(!1),R=z[0],W=z[1],Q=r({}),Y=Q[0],B=Q[1],G=r(""),Z=G[0],ee=G[1],re=r(null),ne=re[0],te=re[1],oe=r(null),ae=oe[0],ce=oe[1];E&&E.length>0&&(k=E[0][0],O=E[0][1]);var ie,le,se,ue=o(null),me=o(null),fe=function(){y&&(me.current?i.render(e.createElement(X,{value:Z,onClick:function(){return T(!0)},className:h}),me.current):console.error("mapSearchPlace element not found!","Selector = ",g))},pe=a(function(){console.log("dragend");var e=ne.getCenter();ye(e.lat,e.lng),ae.setPosition(e)}),de=a(function(){var e=ne.getCenter();ae.setPosition(e)}),ye=function(e,r){var n=new window.mappls.LatLng(e,r);console.log(n),ne.panTo(n),Y.lat!==n.lat&&Y.lng!==n.lng&&(ee("Searching..."),he(!0,{geometry:{location:{lat:e,lng:r}}},!0)),B(n)},ge=function(e){return new Promise(function(r,n){window.mappls.search({query:e},function(e){r(e)},function(e){n(e)})})},ve=(ie=function(e){e&&e.length<3||(H(0),$([]),ge(e).then(function(e){$(e),H(1)},function(){H(-1)}))},le=v,se=null,function(){for(var e=this,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];clearTimeout(se),se=setTimeout(function(){ie.apply(e,n)},le)}),he=function(e,r,n){if(C&&"function"==typeof C){var t=JSON.parse(JSON.stringify(r));C(e,t,n)}};return n(function(){m?(F?Promise.resolve():new Promise(function(e,r){function n(){F=!0,U=!1,K.setAttribute("loaded","true"),K.removeEventListener("load",n),K.removeEventListener("error",t)}function t(){F=!1,U=!1,K.setAttribute("loaded","false"),K.removeEventListener("error",t),K.removeEventListener("load",n),document.head.removeChild(K),V(!1)}window.initMapScript||(window.initMapScript=function(){console.log("Map script successful"),V(!0)}),D.push(e),J.push(r),U||((K=document.createElement("script")).addEventListener("load",n),K.addEventListener("error",t),K.src="https://apis.mapmyindia.com/advancedmaps/v1/f2febcb102cd6a7c1c8f91e3f53ed36a/map_sdk?layer=vector&v=3.0&callback=initMapScript",K.setAttribute("id","mapmyindia-map"),document.querySelector("head").appendChild(K),U=!0)})).then(function(){g&&(me={current:document.querySelector(g)}),function(e,r){if(console.log(window),window.mappls){console.log("aaa");var n=new window.mappls.Map("map",l({center:[28.519467,77.22315],zoomControl:!0,location:!0},p));console.log(n),ue.current&&(te(n),ce(new window.mappls.Marker({map:n,position:new window.mappls.LatLng(e,r),fitbounds:!0,icon_url:"https://apis.mapmyindia.com/map_v3/1.png"})))}else console.error("MapmyIndia map library not found!")}(k,O),W(!1)}).catch(function(e){console.error(e)}):console.error("MapmyIndia map apiKey not found!!!")},[m]),n(function(){ne&&(ye(k,O),fe(),function(){if(E){var e=null;E.forEach(function(r){var n=new window.mappls.Map.Marker([r[0],r[1]],{icon:window.mappls.Map.marker({iconUrl:b,iconSize:[32,32]})}).addTo(ne);r[2]&&n.on("click",function(){P&&e&&e.remove(),e=window.L.popup().setContent(r[2]),n.bindPopup(e).openPopup()})})}}())},[ne]),n(function(){Z&&fe()},[Z]),n(function(){return ne&&(ne.on("dragend",pe),ne.on("drag",de)),function(){ne&&(console.log("remove"),ne.off("dragend",pe),ne.off("drag",de))}},[Y]),c(s,function(){return{latLongFromQuery:function(e){try{return Promise.resolve(ge(e))}catch(e){return Promise.reject(e)}}}}),e.createElement("div",{className:f(u.mapContainer,"map"),id:"map"},e.createElement("div",{ref:ue,className:u.map}),d&&N&&!R&&e.createElement("div",{className:u.markerIcon,style:{backgroundImage:"url("+b+")"}}," "),y&&!R&&!g&&e.createElement("div",{ref:me,className:u.defaultSearchPosition}),_,I&&!R&&e.createElement(q,{onClose:function(){return T(!1)},onChange:function(e){ve(e)},placeholder:S,className:w},e.createElement("div",{className:u.searchResultContainer},e.createElement("div",{className:u.searchLoading},0===x&&"Loading...",-1===x&&"No Results Found"),e.createElement("ul",{onClick:function(e){var r=e.target.closest(".mapItem");if(r&&r.hasAttribute("index")){var n=j[Number(r.getAttribute("index"))];T(!1),ye(n.latitude,n.longitude)}},className:f(u.mapItemUL,"mapItem")},j.map(function(r,n){return e.createElement("li",{key:n,className:f(u.mapItem,"mapItem")},e.createElement("div",{className:u.searchH1},r.placeName),e.createElement("div",{className:u.searchH2},r.displayPlace))})))))});Q.propTypes={apiKey:H.string,lat:H.number,lng:H.number,mapOptions:H.object,mapClassName:H.string,hasMarker:H.bool,hasSearch:H.bool,autoCenter:H.bool,mapSearchPlace:H.string,debounceTime:H.number,inputClassName:H.string,markerIcon:H.string,searchPlaceHolder:H.string,searchClassName:H.string,libraries:H.string,onSelect:H.func,children:H.element,customMarkers:H.array,allowSinglePopup:H.bool},Q.defaultProps={apiKey:"245b57d4-3684-4fd5-9f32-84d26f054bb6",lat:28.7041,lng:77.1025,mapOptions:{},mapClassName:"",hasMarker:!0,hasSearch:!1,autoCenter:!0,mapSearchPlace:"",debounceTime:1e3,inputClassName:"",markerIcon:R,searchPlaceHolder:"Search here",searchClassName:"",libraries:"places",onSelect:function(){},children:null,customMarkers:[],allowSinglePopup:!0};var Y=function(e){return void 0===e&&(e=[]),function e(r,n,t){if(void 0===r&&(r=[]),void 0===n&&(n=0),void 0===t&&(t={}),r.length<1)return t;var o=r[n];if(!o)return t;var a=o.long_name;if(r.length>n){for(var c,i=function(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,void 0):void 0}}(e))){n&&(e=n);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(o.types);!(c=i()).done;)switch(c.value){case"street_number":case"premise":t.streetNumber=a;break;case"route":t.route=a;break;case"postal_code":t.pin=a;break;case"country":t.country=a;break;case"administrative_area_level_1":t.state=a;break;case"locality":t.locality=a;break;case"sublocality":t.sublocality=t.sublocality?t.sublocality+", "+a:a}return e(r,++n,t)}return t}(e)};export{Y as AddressFormatter,Q as GMapify};
