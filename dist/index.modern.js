import e,{useState as r,useEffect as t,forwardRef as n,useRef as o,useImperativeHandle as a}from"react";import c from"react-dom";function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var s={mapContainer:"_THUc8",map:"_1sPx9","address-card":"_1XKj7","map-container":"_2_kUN","geo-address":"_16-L6",markerIcon:"_13l5f",defaultSearchPosition:"_1e2LW",searchLoading:"_36eVq",mapItemUL:"_1Iwzh",mapItem:"_2XwNY",searchH1:"_2z0jc",searchH2:"_2GzpA"};function u(e,r){return e(r={exports:{}},r.exports),r.exports}var m=u(function(e){
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */
!function(){var r={}.hasOwnProperty;function t(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var c=t.apply(null,o);c&&e.push(c)}else if("object"===a)for(var i in o)r.call(o,i)&&o[i]&&e.push(i)}}return e.join(" ")}e.exports?(t.default=t,e.exports=t):window.classNames=t}()}),f="function"==typeof Symbol&&Symbol.for,p=f?Symbol.for("react.element"):60103,d=f?Symbol.for("react.portal"):60106,g=f?Symbol.for("react.fragment"):60107,y=f?Symbol.for("react.strict_mode"):60108,h=f?Symbol.for("react.profiler"):60114,v=f?Symbol.for("react.provider"):60109,b=f?Symbol.for("react.context"):60110,w=f?Symbol.for("react.async_mode"):60111,S=f?Symbol.for("react.concurrent_mode"):60111,_=f?Symbol.for("react.forward_ref"):60112,C=f?Symbol.for("react.suspense"):60113,E=f?Symbol.for("react.suspense_list"):60120,N=f?Symbol.for("react.memo"):60115,P=f?Symbol.for("react.lazy"):60116,k=f?Symbol.for("react.block"):60121,O=f?Symbol.for("react.fundamental"):60117,L=f?Symbol.for("react.responder"):60118,j=f?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function $(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case p:switch(e=e.type){case w:case S:case g:case h:case y:case C:return e;default:switch(e=e&&e.$$typeof){case b:case _:case P:case N:case v:return e;default:return r}}case d:return r}}}function I(e){return $(e)===S}var M={AsyncMode:w,ConcurrentMode:S,ContextConsumer:b,ContextProvider:v,Element:p,ForwardRef:_,Fragment:g,Lazy:P,Memo:N,Portal:d,Profiler:h,StrictMode:y,Suspense:C,isAsyncMode:function(e){return I(e)||$(e)===w},isConcurrentMode:I,isContextConsumer:function(e){return $(e)===b},isContextProvider:function(e){return $(e)===v},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===p},isForwardRef:function(e){return $(e)===_},isFragment:function(e){return $(e)===g},isLazy:function(e){return $(e)===P},isMemo:function(e){return $(e)===N},isPortal:function(e){return $(e)===d},isProfiler:function(e){return $(e)===h},isStrictMode:function(e){return $(e)===y},isSuspense:function(e){return $(e)===C},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===g||e===S||e===h||e===y||e===C||e===E||"object"==typeof e&&null!==e&&(e.$$typeof===P||e.$$typeof===N||e.$$typeof===v||e.$$typeof===b||e.$$typeof===_||e.$$typeof===O||e.$$typeof===L||e.$$typeof===j||e.$$typeof===k)},typeOf:$};function T(){}function x(){}u(function(e,r){}),u(function(e){e.exports=M}),function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}(),Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=T;var A=u(function(e){e.exports=function(){function e(e,r,t,n,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function r(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:x,resetWarningCache:T};return t.PropTypes=t,t}()}),z=require("./left-arrow~EgzQkufV.svg"),H=function(n){var o=n.placeholder,a=n.className,c=r(!0),i=c[0],l=c[1],s=e.createRef();return t(function(){s.current.focus()},[s]),e.createElement("div",{className:m("_14K7s",a,i?"_17s3a":"_23bw5"),onTransitionEnd:function(e){n.onClose()}},e.createElement("div",{className:"_3n9r_"},e.createElement("div",{className:"img-sec",onClick:function(){return l(!1)}},e.createElement("img",{src:z})),e.createElement("input",{type:"text",className:"_1DPib",onChange:function(e){var r;n.onChange(null==e||null===(r=e.target)||void 0===r?void 0:r.value)},ref:s,placeholder:o})),n.children)};H.propTypes={placeHolder:A.string,onChange:A.func,onClose:A.func},H.defaultProps={placeHolder:"Search here",onChange:function(){},onClose:function(){}};var q=require("./marker~fVJYJDHQ.svg"),F={zoom:15,zoomControl:!1,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,mapTypeId:"roadmap"},R=!1,K=!1,U=null,V=[],W=[],D=function(e){if(e)for(var r=0;r<V.length;r++)V[r]();else for(var t=0;t<W.length;t++)W[t](new Error("map script not loaded"));V.length=0,W.length=0},J=require("./search-icon~gbikSNDM.png"),X=function(r){return e.createElement("div",i({},r,{className:m("_1tqcp",r.className)}),e.createElement("div",{className:"_14pA0"}),e.createElement("div",{className:"_4A79G"},e.createElement("span",{className:"_1X7J4"}," Location "),e.createElement("span",{className:"_BXP-z"},r.value)),e.createElement("img",{src:J,className:"_lEzl3"}))},Q=n(function(n,l){var u=n.appKey,f=n.mapOptions,p=n.mapClassName,d=n.hasMarker,g=n.hasSearch,y=n.mapSearchPlace,h=n.debounceTime,v=n.inputClassName,b=n.markerIcon,w=n.searchPlaceHolder,S=n.searchClassName,_=n.libraries,C=n.children,E=n.onSelect,N=n.customMarkers,P=n.autoCenter,k=n.allowSinglePopup,O=n.lat,L=n.lng,j=r([]),$=j[0],I=j[1],M=r(!1),T=M[0],x=M[1],A=r(1),z=A[0],q=A[1],J=r(!1),Q=J[0],Y=J[1],B=r({}),G=B[0],Z=B[1],ee=r(""),re=ee[0],te=ee[1],ne=r(null),oe=ne[0],ae=ne[1];N&&N.length>0&&(O=N[0][0],L=N[0][1]);var ce,ie,le,se=o(null),ue=o(null),me=function(){g&&(ue.current?c.render(e.createElement(X,{value:re,onClick:function(){return x(!0)},className:v}),ue.current):console.error("mapSearchPlace element not found!","Selector = ",y))},fe=function(e,r){var t={lat:e,lng:r};oe.setCenter(t),oe.panTo(t),G.lat!==t.lat&&G.lng!==t.lng&&(te("Searching..."),ge(!0,{geometry:{location:{lat:e,lng:r}}},!0)),Z(t)},pe=function(e){return new Promise(function(r,t){var n={query:e,fields:["name","formatted_address","geometry"]};new window.google.maps.places.PlacesService(oe).textSearch(n,function(e,n){n===window.google.maps.places.PlacesServiceStatus.OK?r(e,n):t(n)})})},de=(ce=function(e){e&&e.length<3||(q(0),I([]),pe(e).then(function(e){I(e),q(1)},function(){q(-1)}))},ie=h,le=null,function(){for(var e=this,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];clearTimeout(le),le=setTimeout(function(){ce.apply(e,t)},ie)}),ge=function(e,r,t){if(E&&"function"==typeof E){var n=JSON.parse(JSON.stringify(r));E(e,n,t)}};return t(function(){u?(window.gm_authFailure=function(){Y(!0),ge(!1,{message:"Map load failed!"},-1)},function(e,r){return R?Promise.resolve():new Promise(function(t,n){function o(){R=!0,K=!1,U.setAttribute("loaded","true"),U.removeEventListener("load",o),U.removeEventListener("error",a)}function a(){R=!1,K=!1,U.setAttribute("loaded","false"),U.removeEventListener("error",a),U.removeEventListener("load",o),document.head.removeChild(U),D(!1)}window.initMapScript||(window.initMapScript=function(){console.log("Map script successful"),D(!0)}),V.push(t),W.push(n),K||((U=document.createElement("script")).addEventListener("load",o),U.addEventListener("error",a),U.src=function(e,r){return"https://maps.googleapis.com/maps/api/js?key="+e+"&callback=initMapScript&libraries="+r}(e,r),U.setAttribute("id","google-map"),document.querySelector("head").appendChild(U),K=!0)})}(u,_).then(function(){y&&(ue={current:document.querySelector(y)}),function(e,r){if(window.google){var t={center:new window.google.maps.LatLng(e,r)};se.current&&ae(new window.google.maps.Map(se.current,i({},t,F,f)))}else console.error("google map library not found!")}(O,L),Y(!1)}).catch(function(){console.error("google map library loading error!")})):console.error("google map appKey not found!!!")},[u]),t(function(){oe&&(fe(O,L),me(),function(){if(N){var e=null;N.forEach(function(r){var t=new window.google.maps.Marker({position:new window.google.maps.LatLng(r[0],r[1]),map:oe,title:"Hello World!",visible:!0,icon:b});r[2]&&t.addListener("click",function(){k&&e&&e.close(),(e=new window.google.maps.InfoWindow({content:r[2]})).open(oe,t)}),t.setMap(oe)})}}())},[oe]),t(function(){re&&me()},[re]),t(function(){return oe&&d&&P&&(oe.addListener("dragend",function(){fe(oe.center.lat(),oe.center.lng())}),oe.addListener("zoom_changed",function(){fe(G.lat,G.lng)})),function(){window.google&&oe&&(window.google.maps.event.clearListeners(oe,"dragend"),window.google.maps.event.clearListeners(oe,"zoom_changed"))}},[G]),a(l,function(){return{latLongFromQuery:function(e){try{return Promise.resolve(pe(e))}catch(e){return Promise.reject(e)}}}}),e.createElement("div",{className:m(s.mapContainer,p)},e.createElement("div",{ref:se,className:s.map}),d&&P&&!Q&&e.createElement("div",{className:s.markerIcon,style:{backgroundImage:"url("+b+")"}}," "),g&&!Q&&!y&&e.createElement("div",{ref:ue,className:s.defaultSearchPosition}),C,T&&!Q&&e.createElement(H,{onClose:function(){return x(!1)},onChange:function(e){de(e)},placeholder:w,className:S},e.createElement("div",{className:s.searchResultContainer},e.createElement("div",{className:s.searchLoading},0===z&&"Loading...",-1===z&&"No Results Found"),e.createElement("ul",{onClick:function(e){var r=e.target&&e.target.closest(".mapItem");if(r.hasAttribute("index")){var t=$[Number(r.getAttribute("index"))];x(!1),fe(t.geometry.location.lat(),t.geometry.location.lng())}},className:m(s.mapItemUL,"mapItem")},$.map(function(r,t){return e.createElement("li",{key:t,index:t,className:m(s.mapItem,"mapItem")},e.createElement("div",{className:s.searchH1},r.name),e.createElement("div",{className:s.searchH2},r.formatted_address))})))))});Q.propTypes={appKey:A.string,lat:A.number,lng:A.number,mapOptions:A.object,mapClassName:A.string,hasMarker:A.bool,hasSearch:A.bool,autoCenter:A.bool,mapSearchPlace:A.string,debounceTime:A.number,inputClassName:A.string,markerIcon:A.string,searchPlaceHolder:A.string,searchClassName:A.string,libraries:A.string,onSelect:A.func,children:A.element,customMarkers:A.array,allowSinglePopup:A.bool},Q.defaultProps={appKey:"",lat:28.7041,lng:77.1025,mapOptions:{},mapClassName:"",hasMarker:!0,hasSearch:!1,autoCenter:!0,mapSearchPlace:"",debounceTime:1e3,inputClassName:"",markerIcon:q,searchPlaceHolder:"Search here",searchClassName:"",libraries:"places",onSelect:function(){},children:null,customMarkers:[],allowSinglePopup:!0};var Y=function(e){return void 0===e&&(e=[]),function e(r,t,n){if(void 0===r&&(r=[]),void 0===t&&(t=0),void 0===n&&(n={}),r.length<1)return n;var o=r[t];if(!o)return n;var a=o.long_name;if(r.length>t){for(var c,i=function(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return l(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,void 0):void 0}}(e))){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(o.types);!(c=i()).done;)switch(c.value){case"street_number":case"premise":n.streetNumber=a;break;case"route":n.route=a;break;case"postal_code":n.pin=a;break;case"country":n.country=a;break;case"administrative_area_level_1":n.state=a;break;case"locality":n.locality=a;break;case"sublocality":n.sublocality=n.sublocality?n.sublocality+", "+a:a}return e(r,++t,n)}return n}(e)};export{Y as AddressFormatter,Q as GMapify};
