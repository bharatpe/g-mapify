import e,{useState as r,useEffect as t,useRef as n}from"react";import o from"react-dom";function a(){return(a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var i={mapContainer:"_THUc8",map:"_1sPx9","address-card":"_1XKj7","map-container":"_2_kUN","geo-address":"_16-L6",markerIcon:"_13l5f",defaultSearchPositoin:"_1H8GY",searchLoading:"_36eVq",mapTextarea:"_Lybmg",mapItemUL:"_1Iwzh",mapItem:"_2XwNY",searchH1:"_2z0jc",searchH2:"_2GzpA"};function s(e,r){return e(r={exports:{}},r.exports),r.exports}var l=s(function(e){
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */
!function(){var r={}.hasOwnProperty;function t(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var c=t.apply(null,o);c&&e.push(c)}else if("object"===a)for(var i in o)r.call(o,i)&&o[i]&&e.push(i)}}return e.join(" ")}e.exports?(t.default=t,e.exports=t):window.classNames=t}()}),u="function"==typeof Symbol&&Symbol.for,m=u?Symbol.for("react.element"):60103,f=u?Symbol.for("react.portal"):60106,p=u?Symbol.for("react.fragment"):60107,d=u?Symbol.for("react.strict_mode"):60108,y=u?Symbol.for("react.profiler"):60114,g=u?Symbol.for("react.provider"):60109,h=u?Symbol.for("react.context"):60110,b=u?Symbol.for("react.async_mode"):60111,v=u?Symbol.for("react.concurrent_mode"):60111,S=u?Symbol.for("react.forward_ref"):60112,w=u?Symbol.for("react.suspense"):60113,_=u?Symbol.for("react.suspense_list"):60120,C=u?Symbol.for("react.memo"):60115,N=u?Symbol.for("react.lazy"):60116,P=u?Symbol.for("react.block"):60121,E=u?Symbol.for("react.fundamental"):60117,O=u?Symbol.for("react.responder"):60118,k=u?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function T(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case m:switch(e=e.type){case b:case v:case p:case y:case d:case w:return e;default:switch(e=e&&e.$$typeof){case h:case S:case N:case C:case g:return e;default:return r}}case f:return r}}}function j(e){return T(e)===v}var $={AsyncMode:b,ConcurrentMode:v,ContextConsumer:h,ContextProvider:g,Element:m,ForwardRef:S,Fragment:p,Lazy:N,Memo:C,Portal:f,Profiler:y,StrictMode:d,Suspense:w,isAsyncMode:function(e){return j(e)||T(e)===b},isConcurrentMode:j,isContextConsumer:function(e){return T(e)===h},isContextProvider:function(e){return T(e)===g},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===m},isForwardRef:function(e){return T(e)===S},isFragment:function(e){return T(e)===p},isLazy:function(e){return T(e)===N},isMemo:function(e){return T(e)===C},isPortal:function(e){return T(e)===f},isProfiler:function(e){return T(e)===y},isStrictMode:function(e){return T(e)===d},isSuspense:function(e){return T(e)===w},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===p||e===v||e===y||e===d||e===w||e===_||"object"==typeof e&&null!==e&&(e.$$typeof===N||e.$$typeof===C||e.$$typeof===g||e.$$typeof===h||e.$$typeof===S||e.$$typeof===E||e.$$typeof===O||e.$$typeof===k||e.$$typeof===P)},typeOf:T};function x(){}function I(){}s(function(e,r){}),s(function(e){e.exports=$}),function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}(),Function.call.bind(Object.prototype.hasOwnProperty),I.resetWarningCache=x;var A=s(function(e){e.exports=function(){function e(e,r,t,n,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function r(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:I,resetWarningCache:x};return t.PropTypes=t,t}()}),L=require("./left-arrow~EgzQkufV.svg"),M=function(n){var o=n.placeholder,a=n.className,c=r(!0),i=c[0],s=c[1],u=e.createRef();return t(function(){u.current.focus()},[u]),e.createElement("div",{className:l("_14K7s",a,i?"_17s3a":"_23bw5"),onTransitionEnd:function(e){n.onClose()}},e.createElement("div",{className:"_3n9r_"},e.createElement("div",{className:"img-sec",onClick:function(){return s(!1)}},e.createElement("img",{src:L})),e.createElement("input",{type:"text",className:"_1DPib",onChange:function(e){var r;n.onChange(null==e||null===(r=e.target)||void 0===r?void 0:r.value)},ref:u,placeholder:o})),n.children)};M.propTypes={placeHolder:A.string,onChange:A.func,onClose:A.func},M.defaultProps={placeHolder:"Search here",onChange:function(){},onClose:function(){}};var H={zoom:15,zoomControl:!1,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,mapTypeId:"roadmap"},z=function(r){return e.createElement("textarea",a({},r,{placeholder:"Search Location",className:l(i.mapTextarea,r.className)}))},F=function(c){var s=c.appKey,u=c.lat,m=c.lng,f=c.mapOptions,p=c.mapClassName,d=c.hasMarker,y=c.hasSearch,g=c.mapSearchPlace,h=c.debounceTime,b=c.inputClassName,v=c.markerIcon,S=c.searchPlaceHolder,w=c.searchClassName,_=c.libraries,C=c.children,N=c.onSelect,P=r([]),E=P[0],O=P[1],k=r(!1),T=k[0],j=k[1],$=r(1),x=$[0],I=$[1],A=r(!1),L=A[0],F=A[1],R=r({}),q=R[0],K=R[1],U=r(""),V=U[0],G=U[1],D=r(null),W=D[0],X=D[1],Y=n(null),B=n(null),J=function(){g&&(B={current:document.querySelector(g)}),Q(u,m)},Q=function(e,r){if(window.google){var t={center:new window.google.maps.LatLng(e,r)};console.log("MAP INSTANXE",Y.current),Y.current&&X(new window.google.maps.Map(Y.current,a({},t,H,f)))}else console.error("google map library not found!")},Z=function(){y&&(B.current?o.render(e.createElement(z,{value:V,onFocus:function(){return j(!0)},className:b}),B.current):console.error("mapSearchPlace element not found!","Selector = ",g))},ee=function(e,r){var t={lat:e,lng:r};W.setCenter(t),W.panTo(t),q.lat!==t.lat&&q.lng!==t.lng&&(G("Loading..."),re(t).then(function(e,r){G(e.formatted_address),ne(!0,e,r)},function(e){G("Unable to fetch location"),ne(!1,{},e)})),K(t)},re=function(e){var r=new window.google.maps.Geocoder;return new Promise(function(t,n){r.geocode({location:e},function(e,r){"OK"===r?e[0]?t(e[0],r):n(-1):n(r)})})},te=function(e){e&&e.length<3||(I(0),function(e){return new Promise(function(r,t){var n={query:e,fields:["name","formatted_address","geometry"]},o=new window.google.maps.places.PlacesService(W);console.log("Service",o,W),o.textSearch(n,function(e,n){n===window.google.maps.places.PlacesServiceStatus.OK?r(e,n):t(n)})})}(e).then(function(e){O(e),I(1)},function(){O(E),I(-1)}))},ne=function(e,r,t){if(N&&"function"==typeof N){var n=JSON.parse(JSON.stringify(r));N(e,n,t)}};return t(function(){s?(function(){if(document.head.querySelector("#google-map"))J();else{window.gm_authFailure=function(){F(!0),ne(!1,{message:"Map load failed!"},-1)};var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key="+s+"&callback=initMapScript&libraries="+_,e.setAttribute("id","google-map"),document.querySelector("head").appendChild(e)}}(),window.initMapScript=function(){var e,r,t;console.log("Map script successfull"),J(),e=te,r=h,t=null,te=function(){for(var n=this,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];clearTimeout(t),t=setTimeout(function(){e.apply(n,a)},r)}}):console.error("google map appKey not found!!!")},[s]),t(function(){W&&(ee(u,m),W&&d&&(W.addListener("dragend",function(){ee(W.center.lat(),W.center.lng())}),W.addListener("zoom_changed",function(){ee(q.lat,q.lng)})),Z())},[W]),t(function(){V&&Z()},[V]),t(function(){return function(){window.google&&W&&(window.google.maps.event.clearListeners(W,"dragend"),window.google.maps.event.clearListeners(W,"zoom_changed"))}},[]),e.createElement("div",{className:l(i.mapContainer,p)},e.createElement("div",{ref:Y,className:i.map}),d&&!L&&e.createElement("div",{className:i.markerIcon,style:{backgroundImage:"url("+v+")"}},"Â "),y&&!L&&!g&&e.createElement("div",{ref:B,className:i.defaultSearchPositoin}),C,T&&!L&&e.createElement(M,{onClose:function(){return j(!1)},onChange:function(e){te(e)},placeholder:S,className:w},e.createElement("div",{className:i.searchResultContainer},e.createElement("div",{className:i.searchLoading},0===x&&"Loading...",-1===x&&"No Results Found"),e.createElement("ul",{onClick:function(e){var r=e.target&&e.target.closest(".mapItem");if(r.hasAttribute("index")){var t=E[Number(r.getAttribute("index"))];j(!1),ee(t.geometry.location.lat(),t.geometry.location.lng())}},className:l(i.mapItemUL,"mapItem")},E.map(function(r,t){return e.createElement("li",{key:t,index:t,className:l(i.mapItem,"mapItem")},e.createElement("div",{className:i.searchH1},r.name),e.createElement("div",{className:i.searchH2},r.formatted_address))})))))};F.propTypes={appKey:A.string,lat:A.number,lng:A.number,mapOptions:A.object,mapClassName:A.string,hasMarker:A.bool,hasSearch:A.bool,mapSearchPlace:A.string,debounceTime:A.number,inputClassName:A.string,markerIcon:A.string,searchPlaceHolder:A.string,searchClassName:A.string,libraries:A.string,onSelect:A.func,children:A.element},F.defaultProps={appKey:"",lat:28.7041,lng:77.1025,mapOptions:{},mapClassName:"",hasMarker:!0,hasSearch:!1,mapSearchPlace:"",debounceTime:1e3,inputClassName:"",markerIcon:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2_hdpi.png",searchPlaceHolder:"Search here",searchClassName:"",libraries:"places",onSelect:function(){},children:null};var R=function(e){return void 0===e&&(e=[]),function e(r,t,n){if(void 0===r&&(r=[]),void 0===t&&(t=0),void 0===n&&(n={}),r.length<1)return n;var o=r[t];if(!o)return n;var a=o.long_name;if(r.length>t){for(var i,s=function(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return c(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,void 0):void 0}}(e))){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(o.types);!(i=s()).done;)switch(i.value){case"postal_code":n.pin=a;break;case"country":n.country=a;break;case"administrative_area_level_1":n.state=a;break;case"locality":n.locality=a;break;case"sublocality":n.sublocality=n.sublocality?n.sublocality+", "+a:a}return e(r,++t,n)}return n}(e)},q=require("../package.json");console.log(" >> ðºðºðº G-Mapify : Version: "+q.version+", Build: production <<");export{R as AddressFormatter,F as GMapify};
