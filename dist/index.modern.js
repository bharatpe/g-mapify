import e,{useState as r,useEffect as n,forwardRef as t,useRef as a,useImperativeHandle as o}from"react";import c from"react-dom";function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var s={mapContainer:"_THUc8",map:"_1sPx9","address-card":"_1XKj7","map-container":"_2_kUN","geo-address":"_16-L6",markerIcon:"_13l5f",defaultSearchPosition:"_1e2LW",searchLoading:"_36eVq",mapItemUL:"_1Iwzh",mapItem:"_2XwNY",searchH1:"_2z0jc",searchH2:"_2GzpA"};function u(e,r){return e(r={exports:{}},r.exports),r.exports}var m=u(function(e){
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */
!function(){var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var c=n.apply(null,a);c&&e.push(c)}else if("object"===o)for(var i in a)r.call(a,i)&&a[i]&&e.push(i)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}),p="function"==typeof Symbol&&Symbol.for,f=p?Symbol.for("react.element"):60103,d=p?Symbol.for("react.portal"):60106,y=p?Symbol.for("react.fragment"):60107,h=p?Symbol.for("react.strict_mode"):60108,v=p?Symbol.for("react.profiler"):60114,b=p?Symbol.for("react.provider"):60109,g=p?Symbol.for("react.context"):60110,S=p?Symbol.for("react.async_mode"):60111,w=p?Symbol.for("react.concurrent_mode"):60111,_=p?Symbol.for("react.forward_ref"):60112,C=p?Symbol.for("react.suspense"):60113,E=p?Symbol.for("react.suspense_list"):60120,N=p?Symbol.for("react.memo"):60115,P=p?Symbol.for("react.lazy"):60116,k=p?Symbol.for("react.block"):60121,M=p?Symbol.for("react.fundamental"):60117,L=p?Symbol.for("react.responder"):60118,$=p?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function I(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case f:switch(e=e.type){case S:case w:case y:case v:case h:case C:return e;default:switch(e=e&&e.$$typeof){case g:case _:case P:case N:case b:return e;default:return r}}case d:return r}}}function T(e){return I(e)===w}var A={AsyncMode:S,ConcurrentMode:w,ContextConsumer:g,ContextProvider:b,Element:f,ForwardRef:_,Fragment:y,Lazy:P,Memo:N,Portal:d,Profiler:v,StrictMode:h,Suspense:C,isAsyncMode:function(e){return T(e)||I(e)===S},isConcurrentMode:T,isContextConsumer:function(e){return I(e)===g},isContextProvider:function(e){return I(e)===b},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===f},isForwardRef:function(e){return I(e)===_},isFragment:function(e){return I(e)===y},isLazy:function(e){return I(e)===P},isMemo:function(e){return I(e)===N},isPortal:function(e){return I(e)===d},isProfiler:function(e){return I(e)===v},isStrictMode:function(e){return I(e)===h},isSuspense:function(e){return I(e)===C},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===y||e===w||e===v||e===h||e===C||e===E||"object"==typeof e&&null!==e&&(e.$$typeof===P||e.$$typeof===N||e.$$typeof===b||e.$$typeof===g||e.$$typeof===_||e.$$typeof===M||e.$$typeof===L||e.$$typeof===$||e.$$typeof===k)},typeOf:I};function O(){}function x(){}u(function(e,r){}),u(function(e){e.exports=A}),x.resetWarningCache=O;var j=u(function(e){e.exports=function(){function e(e,r,n,t,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function r(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:x,resetWarningCache:O};return n.PropTypes=n,n}()}),z=require("./left-arrow~EgzQkufV.svg"),H=function(t){var a=t.placeholder,o=t.className,c=r(!0),i=c[0],l=c[1],s=e.createRef();return n(function(){s.current.focus()},[s]),e.createElement("div",{className:m("_14K7s",o,i?"_17s3a":"_23bw5"),onTransitionEnd:function(e){t.onClose()}},e.createElement("div",{className:"_3n9r_"},e.createElement("div",{className:"img-sec",onClick:function(){return l(!1)}},e.createElement("img",{src:z})),e.createElement("input",{type:"text",className:"_1DPib",onChange:function(e){var r;t.onChange(null==e||null===(r=e.target)||void 0===r?void 0:r.value)},ref:s,placeholder:a})),t.children)};H.propTypes={placeHolder:j.string,onChange:j.func,onClose:j.func},H.defaultProps={placeHolder:"Search here",onChange:function(){},onClose:function(){}};var R=require("./marker~fVJYJDHQ.svg"),q=!1,F=!1,U=null,K=[],D=[],J=function(e){if(e)for(var r=0;r<K.length;r++)K[r]();else for(var n=0;n<D.length;n++)D[n](new Error("Map script not loaded"));K.length=0,D.length=0},V=require("./search-icon~gbikSNDM.png"),W=function(r){return e.createElement("div",i({},r,{className:m("_1tqcp",r.className)}),e.createElement("div",{className:"_14pA0"}),e.createElement("div",{className:"_4A79G"},e.createElement("span",{className:"_1X7J4"}," Location "),e.createElement("span",{className:"_BXP-z"},r.value)),e.createElement("img",{src:V,className:"_lEzl3"}))},X=t(function(t,l){var u=t.apiKey,p=t.mapOptions,f=t.hasMarker,d=t.hasSearch,y=t.mapSearchPlace,h=t.debounceTime,v=t.inputClassName,b=t.markerIcon,g=t.searchPlaceHolder,S=t.searchClassName,w=t.children,_=t.onSelect,C=t.customMarkers,E=t.autoCenter,N=t.allowSinglePopup,P=t.lat,k=t.lng,M=r([]),L=M[0],$=M[1],I=r(!1),T=I[0],A=I[1],O=r(1),x=O[0],j=O[1],z=r(!1),R=z[0],V=z[1],X=r({}),Q=X[0],Y=X[1],B=r(""),G=B[0],Z=B[1],ee=r(null),re=ee[0],ne=ee[1],te=r(null),ae=te[0],oe=te[1];C&&C.length>0&&(P=C[0][0],k=C[0][1]);var ce=a(null),ie=a(null);n(function(){if(window.mappls){var e=new window.mappls.LatLng(P,k);ce.current&&oe(new window.mappls.Marker({map:re,position:e,draggable:!0,fitbounds:!0,icon_url:"https://apis.mapmyindia.com/map_v3/1.png"}))}else console.error("MapmyIndia map library not found!")},[re]);var le,se,ue,me=function(){d&&(ie.current?c.render(e.createElement(W,{value:G,onClick:function(){return A(!0)},className:v}),ie.current):console.error("mapSearchPlace element not found!","Selector = ",y))},pe=function(e,r){var n=new window.mappls.LatLng(e,r);re.panTo(n),Q.lat!==n.lat&&Q.lng!==n.lng&&(Z("Searching..."),ye(!0,{geometry:{location:{lat:e,lng:r}}},!0)),Y(n)},fe=function(e){return new Promise(function(r,n){window.mappls.search({query:e},function(e){r(e)},function(e){n(e)})})},de=(le=function(e){e&&e.length<3||(j(0),$([]),fe(e).then(function(e){$(e),j(1)},function(){j(-1)}))},se=h,ue=null,function(){for(var e=this,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];clearTimeout(ue),ue=setTimeout(function(){le.apply(e,n)},se)}),ye=function(e,r,n){if(_&&"function"==typeof _){var t=JSON.parse(JSON.stringify(r));_(e,t,n)}};return n(function(){u?(q?Promise.resolve():new Promise(function(e,r){function n(){q=!0,F=!1,U.setAttribute("loaded","true"),U.removeEventListener("load",n),U.removeEventListener("error",t)}function t(){q=!1,F=!1,U.setAttribute("loaded","false"),U.removeEventListener("error",t),U.removeEventListener("load",n),document.head.removeChild(U),J(!1)}window.initMapScript||(window.initMapScript=function(){console.log("Map script successful"),J(!0)}),K.push(e),D.push(r),F||((U=document.createElement("script")).addEventListener("load",n),U.addEventListener("error",t),U.src="https://apis.mapmyindia.com/advancedmaps/v1/f2febcb102cd6a7c1c8f91e3f53ed36a/map_sdk?layer=vector&v=3.0&callback=initMapScript",U.setAttribute("id","mapmyindia-map"),document.querySelector("head").appendChild(U),F=!0)})).then(function(){y&&(ie={current:document.querySelector(y)}),function(e,r){if(console.log(window),window.mappls){var n=new window.mappls.LatLng(e,r);ce.current&&ne(new window.mappls.Map("map",i({center:n,zoomControl:!0,location:!0},p)))}else console.error("MapmyIndia map library not found!")}(P,k),V(!1)}).catch(function(e){console.error(e)}):console.error("MapmyIndia map apiKey not found!!!")},[u]),n(function(){re&&(pe(28.519467,77.22315),me(),function(){if(C){var e=null;C.forEach(function(r){var n=new window.mappls.Map.Marker([r[0],r[1]],{icon:window.mappls.Map.marker({iconUrl:b,iconSize:[32,32]})}).addTo(re);r[2]&&n.on("click",function(){N&&e&&e.remove(),e=window.L.popup().setContent(r[2]),n.bindPopup(e).openPopup()})})}}())},[re]),n(function(){G&&me()},[G]),n(function(){return re&&f&&E&&(re.on("drag",function(){var e=re.getCenter();console.log(e),pe(e.lat,e.lng),ae.setPosition(e)}),re.on("zoomend",function(){var e=re.getCenter();pe(e.lat,e.lng)})),function(){re&&(re.off("dragend"),re.off("zoomend"))}},[Q]),o(l,function(){return{latLongFromQuery:function(e){try{return Promise.resolve(fe(e))}catch(e){return Promise.reject(e)}}}}),e.createElement("div",{className:m(s.mapContainer,"map"),id:"map"},e.createElement("div",{ref:ce,className:s.map}),f&&E&&!R&&e.createElement("div",{className:s.markerIcon,style:{backgroundImage:"url("+b+")"}},"Â "),d&&!R&&!y&&e.createElement("div",{ref:ie,className:s.defaultSearchPosition}),w,T&&!R&&e.createElement(H,{onClose:function(){return A(!1)},onChange:function(e){de(e)},placeholder:g,className:S},e.createElement("div",{className:s.searchResultContainer},e.createElement("div",{className:s.searchLoading},0===x&&"Loading...",-1===x&&"No Results Found"),e.createElement("ul",{onClick:function(e){var r=e.target.closest(".mapItem");if(r&&r.hasAttribute("index")){var n=L[Number(r.getAttribute("index"))];A(!1),pe(n.latitude,n.longitude)}},className:m(s.mapItemUL,"mapItem")},L.map(function(r,n){return e.createElement("li",{key:n,className:m(s.mapItem,"mapItem")},e.createElement("div",{className:s.searchH1},r.placeName),e.createElement("div",{className:s.searchH2},r.displayPlace))})))))});X.propTypes={apiKey:j.string,lat:j.number,lng:j.number,mapOptions:j.object,mapClassName:j.string,hasMarker:j.bool,hasSearch:j.bool,autoCenter:j.bool,mapSearchPlace:j.string,debounceTime:j.number,inputClassName:j.string,markerIcon:j.string,searchPlaceHolder:j.string,searchClassName:j.string,libraries:j.string,onSelect:j.func,children:j.element,customMarkers:j.array,allowSinglePopup:j.bool},X.defaultProps={apiKey:"245b57d4-3684-4fd5-9f32-84d26f054bb6",lat:28.7041,lng:77.1025,mapOptions:{},mapClassName:"map",hasMarker:!0,hasSearch:!1,autoCenter:!0,mapSearchPlace:"",debounceTime:1e3,inputClassName:"",markerIcon:R,searchPlaceHolder:"Search here",searchClassName:"",libraries:"places",onSelect:function(){},children:null,customMarkers:[],allowSinglePopup:!0};var Q=function(e){return void 0===e&&(e=[]),function e(r,n,t){if(void 0===r&&(r=[]),void 0===n&&(n=0),void 0===t&&(t={}),r.length<1)return t;var a=r[n];if(!a)return t;var o=a.long_name;if(r.length>n){for(var c,i=function(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return l(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,void 0):void 0}}(e))){n&&(e=n);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(a.types);!(c=i()).done;)switch(c.value){case"street_number":case"premise":t.streetNumber=o;break;case"route":t.route=o;break;case"postal_code":t.pin=o;break;case"country":t.country=o;break;case"administrative_area_level_1":t.state=o;break;case"locality":t.locality=o;break;case"sublocality":t.sublocality=t.sublocality?t.sublocality+", "+o:o}return e(r,++n,t)}return t}(e)};export{Q as AddressFormatter,X as GMapify};
